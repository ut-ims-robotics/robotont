

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Praktikum 4 &mdash; Clearbot 0.1 alpha dokumentatsioon</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
  

  
        <link rel="index" title="Indeks"
              href="../genindex.html"/>
        <link rel="search" title="Otsing" href="../search.html"/>
    <link rel="top" title="Clearbot 0.1 alpha dokumentatsioon" href="../index.html"/>
        <link rel="prev" title="Praktikum 3" href="praktikum3.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Clearbot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Sissejuhatus</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/introduction.html">Mis on Clearbot?</a></li>
</ul>
<p class="caption"><span class="caption-text">Praktikumid</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="praktikum1.html">Praktikum 1 - Linux, ssh, roboti juhtimine klaviatuuriga</a></li>
<li class="toctree-l1"><a class="reference internal" href="praktikum2.html">Praktikum 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="praktikum3.html">Praktikum 3</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Praktikum 4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#enne-praktikumi-juurde-asumist">Enne praktikumi juurde asumist</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mis-on-liitreaalsus-ar-ja-ar-markerid">Mis on liitreaalsus (AR) ja AR-markerid?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tuvastame-markeri-ja-visualiseerime-seda-rvizis">Tuvastame markeri ja visualiseerime seda RVizis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kuidas-tootab-koordinaatteljestik">Kuidas töötab koordinaatteljestik</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-0">Ülesanne 0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-1">Ülesanne 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-2">Ülesanne 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-3">Ülesanne 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-4">Ülesanne 4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enne-praktikumi-lopetamist">Enne praktikumi lõpetamist</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Clearbot</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Praktikum 4</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/labs/praktikum4.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="praktikum-4">
<h1>Praktikum 4<a class="headerlink" href="#praktikum-4" title="Püsiviit sellele pealkirjale">¶</a></h1>
<div class="section" id="enne-praktikumi-juurde-asumist">
<h2>Enne praktikumi juurde asumist<a class="headerlink" href="#enne-praktikumi-juurde-asumist" title="Püsiviit sellele pealkirjale">¶</a></h2>
<ol class="arabic simple">
<li>Mine lehele <a class="reference external" href="https://github.com/">https://github.com/</a><strong>sinu kasutajanimi</strong>/robotont_blank_scripts, kus asenda <strong>sinu kasutajanimi</strong> oma kasutajanimega.</li>
<li>Vajuta rohelist nuppu “Clone or download”</li>
<li>Kopeeri sealt aadress</li>
<li>Ava terminal, <strong>loo ssh-ühendus</strong> ning trüki sinna
<strong>cd catkin_ws/src</strong></li>
<li>Seejärel sisesta
<strong>git clone -sinu-kopeeritud-link-</strong></li>
<li>Seejärel sisesta
<strong>cd robotont_blank_scripts</strong></li>
<li>Seejärel sisesta
<strong>git pull https://github.com/ut-ims-robotics/robotont_blank_scripts.git</strong></li>
<li>Nüüd trüki terminali
<strong>catkin build</strong></li>
<li>Kui see protsess on lõpetanud edukalt, sulge terminal ja oled valmis praktikumiga jätkama.</li>
</ol>
</div>
<div class="section" id="mis-on-liitreaalsus-ar-ja-ar-markerid">
<h2>Mis on liitreaalsus (AR) ja AR-markerid?<a class="headerlink" href="#mis-on-liitreaalsus-ar-ja-ar-markerid" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Paljud on kuulnud virtuaalreaalsusest (VR),
kus kogu maailm on genereeritud arvuti poolt ning kasutajal on võimalus selles maailmas olla ja
sellega interakteeruda.
Liitreaalsus ehk lühidalt AR (ingl <em>augmented reality</em>) ühendab päris maailma ja virtuaalmaailma.
AR’is on seotud päris maailma pildiga virtuaalsed objektid, näiteks uuematele telefonidele on äpid,
kus filmid näiteks lauda ja selle laua peal hakkab telefoniekraanil mingi mehike tantsima.
Sellist sidusust saab ka praktilistel eesmärkidel ära kasutada.
Näiteks arstina saad uurida interaktiivselt patsiendi sisemust ilma teda lahti lõikamata.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/futu.png"><img alt="../_images/futu.png" src="../_images/futu.png" style="width: 840.0px; height: 428.4px;" /></a>
</div>
<p>AR-markerid on spetsiaalselt disainitud kujundid,
mille võid näiteks välja printida ja kuskile kleepida ja arvuti tunneb kaamera abil ära selle markeri asukoha,
suuna ning markeri numbri.
Nende markerite kasutamine aitab arvutil paremini aru saada, kuidas ja kus pärismaailmas asjad on ja näiteks,
et kuhu infot visualiseerida.
Meie kasutame AR-markereid, et aidata robotil aru saada, kuhu peaks liikuma.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/tags.png"><img alt="../_images/tags.png" src="../_images/tags.png" style="width: 436.79999999999995px; height: 436.79999999999995px;" /></a>
</div>
<p>Siin pildil on AR-markerid 0-8.</p>
</div>
<div class="section" id="tuvastame-markeri-ja-visualiseerime-seda-rvizis">
<h2>Tuvastame markeri ja visualiseerime seda RVizis<a class="headerlink" href="#tuvastame-markeri-ja-visualiseerime-seda-rvizis" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Esmalt vaatame, kuidas robot markerit näeb.</p>
<ol class="arabic">
<li><p class="first">Selleks ava terminal ning loo ssh-ühendus robotisse.</p>
</li>
<li><p class="first">Uues terminalis sisesta</p>
<p><strong>roslaunch robotont_blank_scriptsrobotont_training robotont_ar.launch</strong></p>
<p>See paneb käima ROSi draiveri, mis kontrollib rataste kiirusi vastavalt meie sõnumitele
ning tunneb kaamera abil ära ning publitseerib AR-markerite asukoha.
<strong>Seda terminali ära kinni pane!</strong></p>
</li>
<li><p class="first">Ava uus terminal ning trüki sinna</p>
<p><strong>roslaunch robotont_description display_ar_marker.launch</strong></p>
</li>
<li><p class="first">Nüüd võta AR-marker kätte ning liiguta seda kaamera ees, peaksid nägema RVizis, et ilmub roboti ette marker.
Võid proovida ka mitut markerit korraga.
Kui ei ilmu, kutsu juhendaja.</p>
</li>
</ol>
</div>
<div class="section" id="kuidas-tootab-koordinaatteljestik">
<h2>Kuidas töötab koordinaatteljestik<a class="headerlink" href="#kuidas-tootab-koordinaatteljestik" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>3D-teljestikus on kolm telge, mida nimetame <em>x</em>, <em>y</em> ja <em>z</em>.
Pöörded ümber nende telgede on vastavalt <em>roll</em>, <em>pitch</em> ja <em>yaw</em>.
Demonstreerime neid, kasutades inimpead.
Edasi-tagasi liikumine on x-teljel, vasakule-paremale liikumine on y-telg ja üles-alla liikumine on z-telg.
Sellele vastavalt on <em>roll</em> pea kallutamine küljelt-küljele,
<em>pitch</em> on pea noogutamine üles-alla ja <em>yaw</em> on pea pööramine vasakule-paremale.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/tags.png"><img alt="../_images/tags.png" src="../_images/tags.png" style="width: 436.79999999999995px; height: 436.79999999999995px;" /></a>
</div>
<p>Samuti kui me hoiame seda AR-markerit kaamera ees, siis kaugus kaamerast otse on x-telg ja seda,
kui palju marker on kaamera keskelt kõrvale kaldunud,
näitab y-telg. <em>roll</em>, <em>pitch</em> ja <em>yaw</em> ehk RPY sõltuvad sellest, kuidas markerit käes hoida.</p>
</div>
<div class="section" id="ulesanne-0">
<h2>Ülesanne 0<a class="headerlink" href="#ulesanne-0" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Vaatame, mida näeb robot arvudena AR-markeri kohta.</p>
<ol class="arabic">
<li><p class="first">Ava uus terminal ning trüki sinna</p>
<p><strong>rosrun robotont_blank_scripts praktikum4_ar.py</strong></p>
</li>
<li><p class="first">Nüüd kui paned AR-markeri kaamera ette (nii, et käega osa sellest ära ei kata),
siis peaksid terminalist nägema kus see marker kaamera suhtes asub.
Samuti saad teada, mis on markeri ID, seda pead hiljem ka kasutama.
Terminalis prinditakse välja „Marker ID“; mis on markeri number, „Marker: X Y Z“,
mis on markeri koordinaadid kaamera suhtes, „Direction from camera“,
mis näitab, mis suunas marker on kaamera suhtes ja „RPY“, mis on järjestikku
<em>roll</em>, <em>pitch</em> ja <em>yaw</em> väärtused.</p>
</li>
</ol>
</div>
<div class="section" id="ulesanne-1">
<h2>Ülesanne 1<a class="headerlink" href="#ulesanne-1" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis liigub edasi-tagasi vastavalt AR-markeri kaugusele.</p>
<ol class="arabic">
<li><p class="first">Ava uus terminal, loo ssh-ühendus ning seal ava praktikum4_ar.py fail, kasutades käsku</p>
<p><strong>nano catkin_ws/src/robotont/robotont_blank_scripts/scripts/praktikum4_ar.py</strong></p>
</li>
<li><p class="first">Otsi koodis kommentaar „CHANGE THIS NUMBER TO YOUR MARKER ID“
ja selle rea all muuda <em>marker.id</em> == väärtus end markerile vastavaks.</p>
</li>
<li><p class="first">Implementeeri funktsioon, mis liigub olenevalt AR-markeri kaugusest edasi või tagasi.
Robot peab proovima hoida AR-markeri endast alati 0.5 meetri kaugusel.
Selleks on sul ette tehtud funktsioon nimega <em>keep_distance</em>.
Funktsiooni argumentideks on markeri asukoht kaamera suhtes (<em>x</em>, <em>y</em>, <em>z</em>, <em>roll</em>, <em>pitch</em>, <em>yaw</em>)
ja roboti liikumissõnum <em>twist</em>, mida saad kasutada analoogselt <em>vel_msg</em> muutujaga 2. praktikumis.
Funktsioon peabki tagastama <em>twist</em> muutuja, ehk siis käsk, kuidas peab robot liikuma.
Eeskujuks võid võtta 3.praktikumis tehtud <em>bang-bang</em> kontrolleri.</p>
</li>
<li><p class="first">Skriptist väljumiseks Ctrl+X, salvesta ja skripti saad jooksutada käsuga</p>
<p><strong>rosrun robotont_blank_scripts praktikum4_ar.py</strong></p>
<p>Ctrl+C, et skript peatada.</p>
</li>
<li><p class="first">Demonstreeri töötavat kontrollerit juhendajale.</p>
</li>
</ol>
</div>
<div class="section" id="ulesanne-2">
<h2>Ülesanne 2<a class="headerlink" href="#ulesanne-2" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis liigub küljelt-küljele vastavalt AR-markeri asukohale</p>
<ol class="arabic simple">
<li>Ava <strong>praktikum4_ar.py</strong> fail.</li>
<li>Implementeeri funktsioon, mis liigub olenevalt AR-markeri y-koordinaadist küljelt küljele.
Robot peab proovima hoida AR-markeri enda jaoks keskel.
Selleks on koodis valmis pandud funktsioon <em>keep_center</em>.
NB! Samaaegselt töötab ka eelmises ülesandes tehtud funktsioon.</li>
<li>Demonstreeri töötavat kontrollerit juhendajale.</li>
</ol>
</div>
<div class="section" id="ulesanne-3">
<h2>Ülesanne 3<a class="headerlink" href="#ulesanne-3" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis pöörab vastavalt AR-markeri suunale mis pöörab nii, et AR-marker oleks otse vastas.</p>
<ol class="arabic simple">
<li>Ava <strong>praktikum4_ar.py</strong> fail.</li>
<li>Seal on valmis pandud funktsioon nimega <em>turn_towards_ar</em></li>
<li>Implementeeri funktsioon, mis pöörab AR-markeri poole. Eesmärk on, et kui AR-markerit pöörata, siis robot keerab nii, et marker oleks täpselt roboti vastas. Vihje: Jälgi mis väärtus markerit pöörates muutub, et teada, mille järgi robotit kontrollida.</li>
<li>Demonstreeri töötavat kontrollerit juhendajale.</li>
</ol>
</div>
<div class="section" id="ulesanne-4">
<h2>Ülesanne 4<a class="headerlink" href="#ulesanne-4" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis teeb ühe markeriga üht asja, teisega teist. Näiteks kui robotile näidata markerit number 3, teeb robot enda ümber tiiru, kui näidata markerit number 4, proovib robot hoida markerit poole meetri kaugusel nagu esimeses ülesandes.
1.  Ava praktikum4_ar_tricks.py fail, kasutades käsku</p>
<blockquote>
<div><strong>nano catkin_ws/src/robotont/robotont_training/scripts/praktikum4_ar_tricks.py</strong></div></blockquote>
<ol class="arabic simple" start="2">
<li>Kirjuta koodis märgitud alasse oma kood, millega robot teeb ühe markeri puhul üht trikki, teise markeriga teist trikki.</li>
<li>Demonstreeri töötavat koodi juhendajale.</li>
</ol>
<div class="section" id="enne-praktikumi-lopetamist">
<h3>Enne praktikumi lõpetamist<a class="headerlink" href="#enne-praktikumi-lopetamist" title="Püsiviit sellele pealkirjale">¶</a></h3>
<ol class="arabic simple">
<li>Ava uus terminal ning <strong>loo ssh-ühendus</strong></li>
<li>Sisesta sinna
<strong>cd catkin_ws/src/robotont_blank_scripts</strong></li>
<li>Seejärel
<strong>git add .</strong></li>
<li>Seejärel
<strong>git config user.email „YOUR-EMAIL-HERE“</strong></li>
<li>Seejärel
<strong>git config user.name „YOUR-NAME-HERE“</strong></li>
<li>Seejärel
<strong>git commit -m „kommentaar mis praktikum oli“</strong></li>
<li>Seejärel
<strong>git push</strong></li>
<li>Siin sisesta oma githubi kasutajanimi ja parool.
Kontrolli, kas sinu github.com lehel uuenesid failid.</li>
<li>Kui uuenesid, siis loo ssh-ühendus robotisse ning sisesta käsureale <strong>sudo poweroff</strong>.</li>
</ol>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="praktikum3.html" class="btn btn-neutral" title="Praktikum 3" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Autoriõigused 2019, Madis Kaspar Nigol, Veiko Vunder, Renno Raudmäe.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1 alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="../_static/contentui.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>